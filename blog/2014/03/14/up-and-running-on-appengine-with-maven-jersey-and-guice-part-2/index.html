<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Up and running on AppEngine with Maven, Jersey and Guice - Part 2 | Development Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This is part two of my post on getting a web application up and running on Google AppEngine with Maven, Jersey and Guice.
Part 2 gets us to the point of having a working web application running locall">
<meta property="og:type" content="website">
<meta property="og:title" content="Up and running on AppEngine with Maven, Jersey and Guice - Part 2">
<meta property="og:url" content="http://akshayrangnekar.github.io/blog/2014/03/14/up-and-running-on-appengine-with-maven-jersey-and-guice-part-2/index.html">
<meta property="og:site_name" content="Development Notes">
<meta property="og:description" content="This is part two of my post on getting a web application up and running on Google AppEngine with Maven, Jersey and Guice.
Part 2 gets us to the point of having a working web application running locall">
<meta property="og:image" content="/images/postimages/2/dev-appengine-console1.png">
<meta property="og:image" content="/images/postimages/2/dev-appengine-try2.png">
<meta property="og:image" content="/images/postimages/2/dev-appengine-auth1.png">
<meta property="og:image" content="/images/postimages/2/dev-appengine-auth2.png">
<meta property="og:image" content="/images/postimages/2/helloworld-appengine1.png">
<meta property="og:image" content="/images/postimages/2/helloworld-jetty.png">
<meta property="og:image" content="/images/postimages/2/helloworld-appengine1.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Up and running on AppEngine with Maven, Jersey and Guice - Part 2">
<meta name="twitter:description" content="This is part two of my post on getting a web application up and running on Google AppEngine with Maven, Jersey and Guice.
Part 2 gets us to the point of having a working web application running locall">
  
    <link rel="alternative" href="/atom.xml" title="Development Notes" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Development Notes</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Akshay Rangnekar</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:http://akshayrangnekar.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-up-and-running-on-appengine-with-maven-jersey-and-guice-part-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2014/03/14/up-and-running-on-appengine-with-maven-jersey-and-guice-part-2/" class="article-date">
  <time datetime="2014-03-14T10:52:12.000Z" itemprop="datePublished">2014-03-14</time>
</a>
    
  <div class="article-category kinka">
    <a class="article-category-link" href="/categories/Java/">Java</a>►<a class="article-category-link" href="/categories/Java/Server/">Server</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Up and running on AppEngine with Maven, Jersey and Guice - Part 2
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is part two of my post on getting a web application up and running on Google AppEngine with Maven, Jersey and Guice.</p>
<p>Part 2 gets us to the point of having a working web application running locally and deployed on AppEngine. If you haven’t got maven or your working directory set up yet, start on <a href="/blog/2014/03/13/up-and-running-on-appengine-with-maven-jersey-and-guice/">Part 1</a>.<br><a id="more"></a></p>
<h2 id="Don’t_follow_the_Google_docs">Don’t follow the Google docs</h2><p>This is one not to follow along, but helps explain why this tutorial is needed. To begin, I decided to try following the <a href="">AppEngine docs on user maven</a>.</p>
<p>Let’s try their command:<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mbp:listerly$ mvn archetype:generate \</span><br><span class="line"><span class="blockquote">&gt;  -DarchetypeGroupId=com.google.appengine.archetypes \</span></span><br><span class="line"><span class="blockquote">&gt;  -DarchetypeArtifactId=appengine-skeleton-archetype \</span></span><br><span class="line"><span class="blockquote">&gt;  -DarchetypeVersion=1.9.0 \</span></span><br><span class="line"><span class="blockquote">&gt;  -DgroupId=com.listerly.server \</span></span><br><span class="line"><span class="blockquote">&gt;  -DartifactId=server \</span></span><br><span class="line"><span class="blockquote">&gt;  -Dversion=0.1 \</span></span><br><span class="line"><span class="blockquote">&gt;  -Dpackage=com.listerly</span></span><br></pre></td></tr></table></figure></p>
<p>I saw lots of nice maven messages about downloading everything under the sun, and then a hostile failure message.<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr_selector">[INFO]</span> <span class="tag">Archetype</span> <span class="tag">repository</span> <span class="tag">missing</span>. <span class="tag">Using</span> <span class="tag">the</span> <span class="tag">one</span> <span class="tag">from</span> <span class="attr_selector">[com.google.appengine.archetypes:appengine-skeleton-archetype:1.8.7]</span> <span class="tag">found</span> <span class="tag">in</span> <span class="tag">catalog</span> <span class="tag">remote</span></span><br><span class="line"><span class="tag">Downloading</span>: <span class="tag">http</span>:<span class="comment">//repo.maven.apache.org/maven2/com/google/appengine/archetypes/appengine-skeleton-archetype/1.9.0/appengine-skeleton-archetype-1.9.0.jar</span></span><br><span class="line"><span class="attr_selector">[INFO]</span> <span class="tag">------------------------------------------------------------------------</span></span><br><span class="line"><span class="attr_selector">[INFO]</span> <span class="tag">BUILD</span> <span class="tag">FAILURE</span></span><br><span class="line"><span class="attr_selector">[INFO]</span> <span class="tag">------------------------------------------------------------------------</span></span><br><span class="line"><span class="attr_selector">[INFO]</span> <span class="tag">Total</span> <span class="tag">time</span>: <span class="tag">13</span><span class="class">.591</span> <span class="tag">s</span></span><br><span class="line"><span class="attr_selector">[INFO]</span> <span class="tag">Finished</span> <span class="tag">at</span>: <span class="tag">2014-03-14T11</span><span class="pseudo">:39</span><span class="pseudo">:14</span>+<span class="tag">00</span><span class="pseudo">:00</span></span><br><span class="line"><span class="attr_selector">[INFO]</span> <span class="tag">Final</span> <span class="tag">Memory</span>: <span class="tag">13M</span>/<span class="tag">246M</span></span><br><span class="line"><span class="attr_selector">[INFO]</span> <span class="tag">------------------------------------------------------------------------</span></span><br><span class="line"><span class="attr_selector">[ERROR]</span> <span class="tag">Failed</span> <span class="tag">to</span> <span class="tag">execute</span> <span class="tag">goal</span> <span class="tag">org</span><span class="class">.apache</span><span class="class">.maven</span><span class="class">.plugins</span><span class="pseudo">:maven-archetype-plugin</span><span class="pseudo">:2</span><span class="class">.2</span><span class="pseudo">:generate</span> (default-cli) <span class="tag">on</span> <span class="tag">project</span> <span class="tag">standalone-pom</span>: <span class="tag">The</span> <span class="tag">desired</span> <span class="tag">archetype</span> <span class="tag">does</span> <span class="tag">not</span> <span class="tag">exist</span> (com.google.appengine.<span class="attribute">archetypes</span>:<span class="attribute">appengine-skeleton-archetype</span>:<span class="number">1.9</span>.<span class="number">0</span>) <span class="tag">-</span>&gt; <span class="attr_selector">[Help 1]</span></span><br></pre></td></tr></table></figure></p>
<p>Thanks very much for that. That doc was updated (when I loaded it) on March 7 2014, so it’s 7 days old. And doesn’t work. Too new to be out of date, too old to have teething problems. </p>
<p>A <a href="http://search.maven.org/#search%7Cga%7C1%7Cappengine" target="_blank" rel="external">quick search of Maven Central</a> reveals the likely issue - the latest version of this archetype that’s been published is 1.8.7. Looks like someone’s been forgetting to push the archetypes to the Maven Central repo for versions 1.8.8, 1.8.9 and 1.9.0. Two options to proceed: either start using the previous archetype and update. Or start from a cleaner archetype and add in the AppEngine functionality. I’m going to proceed with both options: you can pick and choose the one you prefer.</p>
<h2 id="Starting_from_the_AppEngine_skeleton_archetype">Starting from the AppEngine skeleton archetype</h2><p>Lets first create a branch to work from:<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">mbp:</span>listerly$ git checkout -b feature_gaeSkeletonArchetype</span><br><span class="line">Switched to a <span class="keyword">new</span> branch <span class="string">'feature_gaeSkeletonArchetype'</span></span><br><span class="line"><span class="string">mbp:</span>listerly$ cat README.md </span><br><span class="line">listerly</span><br><span class="line">========</span><br><span class="line"><span class="string">mbp:</span>listerly$ echo <span class="string">"Branch for appengine skeleton archetype"</span> &gt; branch.txt</span><br><span class="line"><span class="string">mbp:</span>listerly$ git add .</span><br><span class="line"><span class="string">mbp:</span>listerly$ git commit -m <span class="string">"Branch message added."</span></span><br><span class="line">[feature_gaeSkeletonArchetype <span class="number">1</span>ca1c52] Branch message added.</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> insertion(+)</span><br><span class="line"> create mode <span class="number">100644</span> branch.txt</span><br><span class="line"><span class="string">mbp:</span>listerly$ git push -u origin feature_gaeSkeletonArchetype</span><br><span class="line">Counting <span class="string">objects:</span> <span class="number">4</span>, done.</span><br><span class="line">Delta compression using up to <span class="number">8</span> threads.</span><br><span class="line">Compressing <span class="string">objects:</span> <span class="number">100</span>% (<span class="number">2</span>/<span class="number">2</span>), done.</span><br><span class="line">Writing <span class="string">objects:</span> <span class="number">100</span>% (<span class="number">3</span><span class="regexp">/3), 325 bytes | 0 bytes/</span>s, done.</span><br><span class="line">Total <span class="number">3</span> (delta <span class="number">0</span>), reused <span class="number">0</span> (delta <span class="number">0</span>)</span><br><span class="line">To <span class="string">https:</span><span class="comment">//github.com/akshayrangnekar/listerly.git</span></span><br><span class="line"> * [<span class="keyword">new</span> branch]      feature_gaeSkeletonArchetype -&gt; feature_gaeSkeletonArchetype</span><br><span class="line">Branch feature_gaeSkeletonArchetype set up to track remote branch feature_gaeSkeletonArchetype from origin.</span><br></pre></td></tr></table></figure></p>
<p>Now we try re-running the maven archetype:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mbp:listerly$ mvn archetype:generate  -DarchetypeGroupId=com<span class="class">.google</span><span class="class">.appengine</span><span class="class">.archetypes</span>  -DarchetypeArtifactId=appengine-skeleton-archetype  -DarchetypeVersion=<span class="number">1.8</span>.<span class="number">7</span>  -DgroupId=com<span class="class">.listerly</span><span class="class">.server</span>  -DartifactId=server  -Dversion=<span class="number">0.1</span>  -Dpackage=com<span class="class">.listerly</span></span><br><span class="line">[INFO] Scanning <span class="keyword">for</span> projects...</span><br><span class="line">[INFO] </span><br><span class="line">[INFO] Using the builder org<span class="class">.apache</span><span class="class">.maven</span><span class="class">.lifecycle</span><span class="class">.internal</span><span class="class">.builder</span><span class="class">.singlethreaded</span><span class="class">.SingleThreadedBuilder</span> with <span class="tag">a</span> thread count of <span class="number">1</span></span><br><span class="line">[LINES REMOVED]</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total <span class="tag">time</span>: <span class="number">6.159</span> s</span><br><span class="line">[INFO] Finished at: <span class="number">2014</span>-<span class="number">03</span>-<span class="number">14</span>T13:<span class="number">14</span>:<span class="number">45</span>+<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">[INFO] Final Memory: <span class="number">14</span>M/<span class="number">246</span>M</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure></p>
<p>That’s a lot better. Lets see what we have created for us. Using a handy little command I found <a href="https://coderwall.com/p/owb6eg" target="_blank" rel="external">here</a>, modified to get rid of gitcrud to make this viewable<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mbp:listerly$ find . -print <span class="string">| grep -v '.git' | sed -e 's;[^/]*/;|____;g;s;____|; |;g'</span></span><br><span class="line">.</span><br><span class="line"><span class="string">|____branch.txt</span></span><br><span class="line"><span class="string">|____README.md</span></span><br><span class="line"><span class="string">|____server</span></span><br><span class="line"><span class="string">| |____pom.xml</span></span><br><span class="line"><span class="string">| |____README.md</span></span><br><span class="line"><span class="string">| |____server-ear</span></span><br><span class="line"><span class="string">| | |____pom.xml</span></span><br><span class="line"><span class="string">| | |____src</span></span><br><span class="line"><span class="string">| | | |____main</span></span><br><span class="line"><span class="string">| | | | |____application</span></span><br><span class="line"><span class="string">| | | | | |____META-INF</span></span><br><span class="line"><span class="string">| | | | | | |____appengine-application.xml</span></span><br><span class="line"><span class="string">| | | | | | |____application.xml</span></span><br><span class="line"><span class="string">| | | | | | |____MANIFEST.MF</span></span><br><span class="line"><span class="string">| |____server-war</span></span><br><span class="line"><span class="string">| | |____pom.xml</span></span><br><span class="line"><span class="string">| | |____src</span></span><br><span class="line"><span class="string">| | | |____main</span></span><br><span class="line"><span class="string">| | | | |____java</span></span><br><span class="line"><span class="string">| | | | |____webapp</span></span><br><span class="line"><span class="string">| | | | | |____WEB-INF</span></span><br><span class="line"><span class="string">| | | | | | |____appengine-web.xml</span></span><br><span class="line"><span class="string">| | | | | | |____logging.properties</span></span><br><span class="line"><span class="string">| | | | | | |____web.xml</span></span><br><span class="line"><span class="string">| | | |____test</span></span><br><span class="line"><span class="string">| | | | |____java</span></span><br></pre></td></tr></table></figure></p>
<p>Ok - let’s try running this:<br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="atom">mbp</span>:<span class="atom">listerly</span>$ <span class="atom">cd</span> <span class="atom">server</span></span><br><span class="line"><span class="atom">mbp</span>:<span class="atom">server</span>$ <span class="atom">mvn</span> <span class="atom">appengine</span>:<span class="atom">devserver</span></span><br><span class="line">[<span class="name">INFO</span>] <span class="name">Scanning</span> <span class="atom">for</span> <span class="atom">projects</span>...</span><br><span class="line">[<span class="name">INFO</span>] ------------------------------------------------------------------------</span><br><span class="line">[<span class="name">INFO</span>] <span class="name">Reactor</span> <span class="name">Build</span> <span class="name">Order</span>:</span><br><span class="line">[<span class="name">INFO</span>] </span><br><span class="line">[<span class="name">INFO</span>] <span class="atom">server</span></span><br><span class="line">[<span class="name">INFO</span>] <span class="atom">server</span>-<span class="atom">war</span></span><br><span class="line">[<span class="name">INFO</span>] <span class="atom">server</span>-<span class="atom">ear</span></span><br><span class="line">[<span class="name">REMOVED</span> <span class="name">LINES</span>]</span><br><span class="line">[<span class="name">INFO</span>] ------------------------------------------------------------------------</span><br><span class="line">[<span class="name">INFO</span>] <span class="name">Reactor</span> <span class="name">Summary</span>:</span><br><span class="line">[<span class="name">INFO</span>] </span><br><span class="line">[<span class="name">INFO</span>] <span class="atom">server</span> ............................................ <span class="name">FAILURE</span> [ <span class="number">16.241</span> <span class="atom">s</span>]</span><br><span class="line">[<span class="name">INFO</span>] <span class="atom">server</span>-<span class="atom">war</span> ........................................ <span class="name">SKIPPED</span></span><br><span class="line">[<span class="name">INFO</span>] <span class="atom">server</span>-<span class="atom">ear</span> ........................................ <span class="name">SKIPPED</span></span><br><span class="line">[<span class="name">INFO</span>] ------------------------------------------------------------------------</span><br><span class="line">[<span class="name">INFO</span>] <span class="name">BUILD</span> <span class="name">FAILURE</span></span><br><span class="line">[<span class="name">INFO</span>] ------------------------------------------------------------------------</span><br><span class="line">[<span class="name">INFO</span>] <span class="name">Total</span> <span class="atom">time</span>: <span class="number">17.469</span> <span class="atom">s</span></span><br><span class="line">[<span class="name">INFO</span>] <span class="name">Finished</span> <span class="atom">at</span>: <span class="number">2014</span>-<span class="number">03</span>-<span class="number">14</span><span class="name">T13</span>:<span class="number">26</span>:<span class="number">54</span>+<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">[<span class="name">INFO</span>] <span class="name">Final</span> <span class="name">Memory</span>: <span class="number">9</span><span class="name">M</span>/<span class="number">246</span><span class="name">M</span></span><br><span class="line">[<span class="name">INFO</span>] ------------------------------------------------------------------------</span><br><span class="line">[<span class="name">ERROR</span>] <span class="name">Failed</span> <span class="atom">to</span> <span class="atom">execute</span> <span class="atom">goal</span> <span class="atom">com</span>.<span class="atom">google</span>.<span class="atom">appengine</span>:<span class="atom">appengine</span>-<span class="atom">maven</span>-<span class="atom">plugin</span>:<span class="number">1.8</span>.7:<span class="atom">devserver</span> (<span class="atom">default</span>-<span class="atom">cli</span>) <span class="atom">on</span> <span class="atom">project</span> <span class="atom">server</span>: <span class="name">The</span> <span class="atom">application</span> <span class="atom">directory</span> <span class="atom">does</span> <span class="atom">not</span> <span class="atom">exist</span> : /<span class="name">Users</span>/<span class="atom">akshay</span>/<span class="name">Dev</span>/<span class="name">Listerly</span>/<span class="atom">listerly</span>/<span class="atom">server</span>/<span class="atom">target</span>/<span class="atom">server</span>-<span class="number">0.1</span> -&gt; [<span class="name">Help</span> <span class="number">1</span>]</span><br></pre></td></tr></table></figure></p>
<p>Not nice. Ok, let’s try again with some help from the appengine docs (though not following them to the letter since they are wrong about the directory to run from):<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mbp:server akshay$ mvn clean <span class="operator"><span class="keyword">install</span></span><br><span class="line">[REMOVED LOTS <span class="keyword">OF</span> <span class="keyword">LINES</span>]</span><br><span class="line">[INFO] <span class="comment">------------------------------------------------------------------------</span></span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] <span class="comment">------------------------------------------------------------------------</span></span><br><span class="line">[INFO] Total <span class="keyword">time</span>: <span class="number">17.990</span> s</span><br><span class="line">[INFO] Finished <span class="keyword">at</span>: <span class="number">2014</span>-<span class="number">03</span>-<span class="number">14</span>T13:<span class="number">36</span>:<span class="number">48</span>+<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">[INFO] Final Memory: <span class="number">11</span>M/<span class="number">246</span>M</span><br><span class="line">[INFO] <span class="comment">------------------------------------------------------------------------</span></span><br><span class="line">mbp:<span class="keyword">server</span> akshay$ mvn -pl <span class="keyword">server</span>-ear appengine:devserver</span><br><span class="line">[INFO] Scanning <span class="keyword">for</span> projects...</span><br><span class="line">[REMOVED LOTS <span class="keyword">OF</span> <span class="keyword">LINES</span>]</span><br><span class="line">[INFO] INFO: The admin console <span class="keyword">is</span> running <span class="keyword">at</span> http://localhost:<span class="number">8080</span>/_ah/admin</span><br><span class="line">[INFO] Mar <span class="number">14</span>, <span class="number">2014</span> <span class="number">1</span>:<span class="number">40</span>:<span class="number">02</span> PM com.google.appengine.tools.development.DevAppServerImpl doStart</span><br><span class="line">[INFO] INFO: Dev App <span class="keyword">Server</span> <span class="keyword">is</span> <span class="keyword">now</span> running</span></span><br></pre></td></tr></table></figure></p>
<p>That looks good. </p>
<p>If we load up the admin console at <code>http://localhost:8080/_ah/admin</code> it seems right:<br><img src="/images/postimages/2/dev-appengine-console1.png">    </p>
<p>There is of course nothing there. So let’s create a very simple Servlet. Here’s my incredibly basic HelloWorldServlet:<br><figure class="highlight java"><figcaption><span>HelloWorldServlet.java</span><a href="/downloads/code/1/HelloWorldServlet.java">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.listerly;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="annotation">@WebServlet</span>(<span class="string">"/Hello"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> </span><br><span class="line">		<span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">		resp.setContentType(<span class="string">"text/plain"</span>);</span><br><span class="line">		resp.getWriter().println(<span class="string">"Hello AppEngine!"</span>);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>But if we try running it:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mbp:server akshay$ mvn install&#10;[INFO] Scanning for projects...&#10;...&#10;[INFO] -------------------------------------------------------------&#10;[ERROR] COMPILATION ERROR : &#10;[INFO] -------------------------------------------------------------&#10;[ERROR] /Users/akshay/Dev/Listerly/listerly/server/server-war/src/main/java/com/listerly/HelloWorldServlet.java:[6,31] error: package javax.servlet.annotation does not exist&#10;[ERROR] /Users/akshay/Dev/Listerly/listerly/server/server-war/src/main/java/com/listerly/HelloWorldServlet.java:[11,1] error: cannot find symbol&#10;[ERROR]   symbol: class WebServlet&#10;/Users/akshay/Dev/Listerly/listerly/server/server-war/src/main/java/com/listerly/HelloWorldServlet.java:[6,31] error: package javax.servlet.annotation does not exist&#10;[ERROR] /Users/akshay/Dev/Listerly/listerly/server/server-war/src/main/java/com/listerly/HelloWorldServlet.java:[11,1] error: cannot find symbol&#10;[INFO] 4 errors</span><br></pre></td></tr></table></figure></p>
<p>Ass. So clearly the archetype doesn’t use the latest version of the Servlet API. Interestingly, I cannot find anything easily available in Google’s docs about what version of the Servlet API they support. Let’s try defining the servlet in the web.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">servlet-name</span>&gt;</span>HelloWorldServlet<span class="tag">&lt;/<span class="title">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">servlet-class</span>&gt;</span>com.listerly.HelloWorldServlet<span class="tag">&lt;/<span class="title">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">servlet-name</span>&gt;</span>HelloWorldServlet<span class="tag">&lt;/<span class="title">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">url-pattern</span>&gt;</span>/hi<span class="tag">&lt;/<span class="title">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>and rerunning:<br><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mbp:<span class="keyword">server</span> akshay$ mvn install</span><br><span class="line">mbp:<span class="keyword">server</span> akshay$ mvn -pl <span class="keyword">server</span>-ear appengine:devserver</span><br></pre></td></tr></table></figure></p>
<p>and this time we get something better:<br><img src="/images/postimages/2/dev-appengine-try2.png">    </p>
<p>Awesome. We now have a servlet running on our local dev server. Looks like we can’t use the WebServlet annotation with the devserver though. Lets try pushing this app to appengine. First, there are a tweak to the configuration file. In <code>appengine-web.xml</code> set the application to the id of the project you created on the AppEngine console:</p>
<figure class="highlight xml"><figcaption><span>server-war/src/main/webapp/WEB-INF/appengine-web.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">appengine-web-app</span> <span class="attribute">xmlns</span>=<span class="value">"http://appengine.google.com/ns/1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">application</span>&gt;</span>listerly-dev<span class="tag">&lt;/<span class="title">application</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">version</span>&gt;</span>$&#123;appengine.app.version&#125;<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">threadsafe</span>&gt;</span>true<span class="tag">&lt;/<span class="title">threadsafe</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="title">system-properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"java.util.logging.config.file"</span> <span class="attribute">value</span>=<span class="value">"WEB-INF/logging.properties"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">system-properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">appengine-web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>and in the <code>appengine-application.xml</code> do the same thing:<br><figure class="highlight xml"><figcaption><span>server-ear/src/main/application/META-INF/appengine-application.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">appengine-application</span> <span class="attribute">xmlns</span>=<span class="value">"http://appengine.google.com/ns/1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">application</span>&gt;</span>listerly-dev<span class="tag">&lt;/<span class="title">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">appengine-application</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>And then run the <code>update</code> tasks <code>mvn -pl server-ear appengine:update</code>. If all is well, you should first see a browser window pop up asking you for authentication:<br><img src="/images/postimages/2/dev-appengine-auth1.png">    </p>
<img src="/images/postimages/2/dev-appengine-auth2.png">    
<p>Enter that code when you get the prompt <code>Please enter code:</code>. If all is well you should see a <code>BUILD SUCCESS</code> message at the end of the compilation and deployment step (note: this takes a couple of minutes);</p>
<p>Load the page from your appspot URL <code>http://[your-application-id].appspot.com/hi</code> and you should see your Hello AppEngine page, running on Google AppEngine. That’s success for this part. </p>
<img src="/images/postimages/2/helloworld-appengine1.png">    
<p>Lets commit everything and then switch back to the master to try the handrolled way.<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">mbp:</span>~<span class="regexp">/Dev/</span><span class="constant">Listerly/</span>listerly<span class="variable">$ </span>git add .</span><br><span class="line">[<span class="constant">NON-ERROR OUTPUT HIDDEN]</span></span><br><span class="line"><span class="symbol">mbp:</span>~<span class="regexp">/Dev/</span><span class="constant">Listerly/</span>listerly<span class="variable">$ </span>git commit -m <span class="string">"Working HelloWorld with Google archetype"</span></span><br><span class="line">[<span class="constant">NON-ERROR OUTPUT HIDDEN]</span></span><br><span class="line"><span class="symbol">mbp:</span>~<span class="regexp">/Dev/</span><span class="constant">Listerly/</span>listerly<span class="variable">$ </span>git push</span><br><span class="line">[<span class="constant">NON-ERROR OUTPUT HIDDEN]</span></span><br><span class="line"><span class="symbol">mbp:</span>~<span class="regexp">/Dev/</span><span class="constant">Listerly/</span>listerly<span class="variable">$ </span>git checkout master</span><br><span class="line">[<span class="constant">NON-ERROR OUTPUT HIDDEN]</span></span><br><span class="line"><span class="symbol">mbp:</span>~<span class="regexp">/Dev/</span><span class="constant">Listerly/</span>listerly<span class="variable">$ </span>git pull</span><br><span class="line"><span class="constant">Already </span>up-to-date.</span><br><span class="line"><span class="symbol">mbp:</span>~<span class="regexp">/Dev/</span><span class="constant">Listerly/</span>listerly<span class="variable">$ </span>ls</span><br><span class="line"><span class="constant">README.</span>md	server</span><br></pre></td></tr></table></figure></p>
<h2 id="Starting_from_scratch">Starting from scratch</h2><p>I have to admit, this is my preferred way of starting because I like to have complete control over the project layout, the directory structure etc.</p>
<p>Let’s start with what my ideal directory structure is:</p>
<ul>
<li>[root directory] - Primarily contains build files<ul>
<li><em>src</em><ul>
<li><em>main</em><ul>
<li><em>java</em> - The main directory for source code</li>
<li><em>resources</em> - Other items that have to go into the jar (logging config, application config)</li>
<li><em>webapp</em> - Resources (css, images, js)</li>
<li><em>templates</em> - Freemarker templates for pages</li>
</ul>
</li>
<li><em>test</em> - Testing resources (will be defined later)</li>
</ul>
</li>
<li><em>build</em> - temporary directory, ignored by git, for artifacts</li>
</ul>
</li>
</ul>
<p>Lets start by creating that directory structure (leave out the build directory - should be created automatically). Then we’ll make a basic Maven build file (named <code>pom.xml</code> in our root directory)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">project</span> <span class="attribute">xmlns</span>=<span class="value">"http://maven.apache.org/POM/4.0.0"</span> <span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">  <span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="title">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.listerly<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>listerly-server<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">version</span>&gt;</span>0.1<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="title">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="title">name</span>&gt;</span>Listerly Main Server<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">url</span>&gt;</span>http://www.listerly.com<span class="tag">&lt;/<span class="title">url</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="title">dependencies</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">	  	<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">	  	<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">	  	<span class="tag">&lt;<span class="title">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Then we add our basic servlet and a web.xml:</p>
<p>In <code>src/main/java/com/listerly/</code><br><figure class="highlight java"><figcaption><span>HelloWorldServlet.java</span><a href="/downloads/code/1/b/HelloWorldServlet.java">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.listerly;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="annotation">@SuppressWarnings</span>(<span class="string">"serial"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</span><br><span class="line"></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span></span><br><span class="line">			<span class="keyword">throws</span> ServletException, IOException </span>{</span><br><span class="line">		resp.setContentType(<span class="string">"text/plain"</span>);</span><br><span class="line">		resp.getWriter().println(<span class="string">"Hello, my AppEngine"</span>);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>In <code>src/main/webapp/WEB-INF</code><br><figure class="highlight xml"><figcaption><span>web.xml</span><a href="/downloads/code/1/b/web.xml">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">web-app</span> <span class="attribute">version</span>=<span class="value">"2.5"</span> <span class="attribute">xmlns</span>=<span class="value">"http://java.sun.com/xml/ns/javaee"</span></span><br><span class="line"><span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line"><span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">welcome-file-list</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="title">welcome-file</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">welcome-file-list</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">servlet</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="title">servlet-name</span>&gt;</span>HelloWorldServlet<span class="tag">&lt;/<span class="title">servlet-name</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="title">servlet-class</span>&gt;</span>com.listerly.HelloWorldServlet<span class="tag">&lt;/<span class="title">servlet-class</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="title">servlet-mapping</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="title">servlet-name</span>&gt;</span>HelloWorldServlet<span class="tag">&lt;/<span class="title">servlet-name</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="title">url-pattern</span>&gt;</span>/hi<span class="tag">&lt;/<span class="title">url-pattern</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>Lets try building our war file:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mbp:~/Dev/Listerly/listerly$ mvn package&#10;[BLAH BLAH BLAH...]&#10;[INFO] ------------------------------------------------------------------------&#10;[INFO] BUILD SUCCESS&#10;[INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure></p>
<p>Good so far. But there’s not much we can do with this just yet. Let’s first start with trying to run our war on a web server independently of AppEngine. </p>
<p>Lets add the Jetty plugin to our <code>pom.xml</code>:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">build</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.eclipse.jetty<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>jetty-maven-plugin<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">version</span>&gt;</span>9.1.3.v20140225<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">plugin</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="title">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">build</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>Now try running the <code>mvn jetty:run</code> task<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mbp:~/Dev/Listerly/listerly$ mvn package&#10;[BLAH BLAH BLAH...]&#10;mbp:~/Dev/Listerly/listerly$ mvn jetty:run&#10;[BLAH BLAH BLAH...]&#10;[INFO] Started Jetty Server</span><br></pre></td></tr></table></figure></p>
<p>If you try accessing your servlet at <code>localhost:8080/hi</code> you should see a positive result:<br><img src="/images/postimages/2/helloworld-jetty.png">    </p>
<p>Ok, lets move on to integrating appengine. </p>
<p>Before we start, I’m going to change my servlet a tiny bit just to be able to differentiate and make sure this is the version we’re seeing. Change the appropriate line to <code>resp.getWriter().println(&quot;Hello, handrolled AppEngine!&quot;);</code></p>
<p>Next, we need to create the <code>appengine-web.xml</code> (in <code>src/main/webapp/WEB-INF/</code>) that tells AppEngine what project and version<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">appengine-web-app</span> <span class="attribute">xmlns</span>=<span class="value">"http://appengine.google.com/ns/1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">application</span>&gt;</span>listerly-dev<span class="tag">&lt;/<span class="title">application</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">version</span>&gt;</span>1<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">threadsafe</span>&gt;</span>true<span class="tag">&lt;/<span class="title">threadsafe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">appengine-web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>Then we need to add a couple of items to our <code>pom.xml</code><br><figure class="highlight xml"><figcaption><span>pom.xml - see lines 14-18 and 32-36</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">project</span> <span class="attribute">xmlns</span>=<span class="value">"http://maven.apache.org/POM/4.0.0"</span> <span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">  <span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="title">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.listerly<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>listerly-server<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">version</span>&gt;</span>0.1<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="title">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="title">name</span>&gt;</span>Listerly Main Server<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">url</span>&gt;</span>http://www.listerly.com<span class="tag">&lt;/<span class="title">url</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="title">dependencies</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.google.appengine<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>appengine-api-1.0-sdk<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">version</span>&gt;</span>1.9.0<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">	  	<span class="tag">&lt;<span class="title">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">	  	<span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">	  	<span class="tag">&lt;<span class="title">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">plugins</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">plugin</span>&gt;</span></span><br><span class="line">		  <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.eclipse.jetty<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">		  <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>jetty-maven-plugin<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">		  <span class="tag">&lt;<span class="title">version</span>&gt;</span>9.1.3.v20140225<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.google.appengine<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>appengine-maven-plugin<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">version</span>&gt;</span>1.8.7<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">build</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="title">project</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>Now if we run <code>mvn appengine:devserver</code> and visit <code>http://localhost:8080/hi</code> we get something that looks good:</p>
<img src="/images/postimages/2/helloworld-appengine1.png">    
<p>Lets try pushing it to the Google servers. Run <code>mvn appengine:update</code> and if all goes well (it should!), open a browser to <code>http://[app-id].appspot.com/hi</code>. Uh oh. Doesn’t say “handrolled” for me. Looks like it’s still running the old version. Fortunately, this is to be expected because AppEngine allows you to upload multiple versions of your app, but only one of them is the “default version”. Lets make this version default. Visit <code>appengine.google.com</code>. Login, and then click on your application. In the left navigation bar you should see “versions”. Click there, and you’ll see that you have two versions deployed: <code>1-war</code> that was created by the AppEngine archetype, and <code>1</code>, which is the version we just created. Select 1, and click make default. Now if you reload your other browser window, you should see “Hello, handrolled AppEngine!”. That’s success for Part 2.</p>
<p>You can choose which approach you prefer. I like the ability to have full control over my project structure so for the rest of this tutorial I’m going to go with the second approach (which the more attentive may have guessed by the fact that this has all been done on the master branch though I claim that was accidental). Add everything into git (if you’re going with this approach - otherwise discard everything and merge the other branch into master) and we’ll be ready to go with <a href="/blog/2014/03/18/up-and-running-on-appengine-with-maven-jersey-and-guice-part-3/">Part 3</a>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://akshayrangnekar.github.io//blog/2014/03/14/up-and-running-on-appengine-with-maven-jersey-and-guice-part-2/" data-id="ci8o7rbd20015s19yyd04782f" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AppEngine/">AppEngine</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Maven/">Maven</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2014/03/18/up-and-running-on-appengine-with-maven-jersey-and-guice-part-3/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Up and running on AppEngine with Maven, Jersey and Guice - Part 3
        
      </div>
    </a>
  
  
    <a href="/blog/2014/03/13/up-and-running-on-appengine-with-maven-jersey-and-guice/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Up and running on AppEngine with Maven, Jersey and Guice - Part 1</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/AppEngine/">AppEngine</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/Server/">Server</a><span class="category-list-count">1</span></li></ul></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AppEngine/">AppEngine</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Freemarker/">Freemarker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Guice/">Guice</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JPA/">JPA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jersey/">Jersey</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/">Maven</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AppEngine/" style="font-size: 20px;">AppEngine</a><a href="/tags/Freemarker/" style="font-size: 10px;">Freemarker</a><a href="/tags/Guice/" style="font-size: 12.5px;">Guice</a><a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a><a href="/tags/JPA/" style="font-size: 10px;">JPA</a><a href="/tags/Java/" style="font-size: 20px;">Java</a><a href="/tags/Jersey/" style="font-size: 15px;">Jersey</a><a href="/tags/Maven/" style="font-size: 17.5px;">Maven</a><a href="/tags/git/" style="font-size: 12.5px;">git</a><a href="/tags/github/" style="font-size: 10px;">github</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2015/04/19/moving-to-hexo/">Moving to Hexo</a>
          </li>
        
          <li>
            <a href="/blog/2014/03/18/up-and-running-on-appengine-with-maven-jersey-and-guice-part-5/">Up and running on AppEngine with Maven, Jersey and Guice - Part 5</a>
          </li>
        
          <li>
            <a href="/blog/2014/03/18/up-and-running-on-appengine-with-maven-jersey-and-guice-part-4/">Up and running on AppEngine with Maven, Jersey and Guice - Part 4</a>
          </li>
        
          <li>
            <a href="/blog/2014/03/18/up-and-running-on-appengine-with-maven-jersey-and-guice-part-3/">Up and running on AppEngine with Maven, Jersey and Guice - Part 3</a>
          </li>
        
          <li>
            <a href="/blog/2014/03/14/up-and-running-on-appengine-with-maven-jersey-and-guice-part-2/">Up and running on AppEngine with Maven, Jersey and Guice - Part 2</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Akshay Rangnekar<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>